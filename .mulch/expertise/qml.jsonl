{"type":"pattern","name":"Theme singleton for responsive scaling","description":"Theme.qml is a pragma Singleton registered via qmldir. All colors, font sizes, and spacing reference Theme.xxx — zero hardcoded values in components. Theme.scale = Math.min(windowWidth/480, windowHeight/960) makes all measurements responsive. Main.qml binds root.width/height to Theme.windowWidth/windowHeight on change.","recorded_at":"2026-02-22T04:35:46.178Z","classification":"tactical","id":"mx-c24d57"}
{"type":"pattern","name":"Modular QML directory structure","description":"qml/views/ contains full-screen containers (FocusView, LedgerView, CalendarView). qml/components/ contains reusable building blocks (ContextBand, InputBar, ActionButton, KindBadge, TimelineLine, WebSocketClient). All registered in qml.qrc. qmldir registers Theme as singleton.","recorded_at":"2026-02-22T04:35:46.189Z","classification":"tactical","id":"mx-e0230d"}
{"type":"pattern","name":"WebSocketClient as non-visual Item","description":"WebSocketClient.qml (in components/) owns the WS connection and all live ListModels. Exposes cardsModel, ledgerModel, calendarModel as ListModel properties. sendCardAction() and sendChatMessage() for outbound. Auto-reconnects every 3s on close/error via Timer. Data mapping happens at ingest: ISO timestamps → decimal hours for calendar, details.subject extraction for ledger, actionsJson as JSON string for cards.","recorded_at":"2026-02-22T04:35:46.189Z","classification":"tactical","id":"mx-7409e5"}
{"type":"convention","content":"FocusView receives property var card (null = empty state). Card actions stored as actionsJson string, parsed with JSON.parse() in Repeater model. Variant computed in QML: action==='dismiss' → dismiss, index===0 → primary, else secondary.","recorded_at":"2026-02-22T04:35:46.190Z","classification":"tactical","id":"mx-463da0"}
{"type":"reference","name":"Qt modules required","description":"openphone-ui.pro: QT += quick websockets. QML imports: QtQuick, QtQuick.Layouts, QtWebSockets. main.cpp loads qrc:/qml/Main.qml.","recorded_at":"2026-02-22T04:35:46.190Z","classification":"tactical","id":"mx-dc5496"}
{"type":"reference","name":"macOS Qt build output","description":"qmake + make produces openphone-ui.app bundle. Run via ./openphone-ui.app/Contents/MacOS/openphone-ui or double-click the app.","classification":"tactical","recorded_at":"2026-02-22T07:33:43.725Z","id":"mx-8d2f32"}
{"type":"convention","content":"Displayable card = first card with actions.length > 0. Cards without action items are not shown; main chat is displayed instead. getDisplayableCard() in Main.qml filters cardsModel. FocusView.card and InputBar cardId use this so chat routes to ui:chat:general when no actionable card.","classification":"tactical","recorded_at":"2026-02-22T16:59:30.859Z","id":"mx-7d4cb4"}
{"type":"convention","content":"FocusView layout: card at top (beginning of conversation), ChatArea below. When card is active, hide ChatArea 'Instruct or query' placeholder via showEmptyPlaceholder. Card-first flow establishes context before chat.","classification":"tactical","recorded_at":"2026-02-22T17:07:34.101Z","id":"mx-951261"}
